<html lang="en">
<head>
<title>The GNU C Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name=description content="The GNU C Library">
<meta name=generator content="makeinfo 4.2">
<link href="http://www.gnu.org/software/texinfo/" rel=generator-home>
</head>
<body>
<p>
Node:<a name="Dynamic%20String%20Input">Dynamic String Input</a>,
Next:<a rel=next accesskey=n href="Other-Input-Conversions.html#Other%20Input%20Conversions">Other Input Conversions</a>,
Previous:<a rel=previous accesskey=p href="String-Input-Conversions.html#String%20Input%20Conversions">String Input Conversions</a>,
Up:<a rel=up accesskey=u href="Formatted-Input.html#Formatted%20Input">Formatted Input</a>
<hr><br>

<h4>Dynamically Allocating String Conversions</h4>

<p>A GNU extension to formatted input lets you safely read a string with no
maximum size.  Using this feature, you don't supply a buffer; instead,
<code>scanf</code> allocates a buffer big enough to hold the data and gives
you its address.  To use this feature, write <code>a</code> as a flag
character, as in <code>%as</code> or <code>%a[0-9a-z]</code>.

<p>The pointer argument you supply for where to store the input should have
type <code>char **</code>.  The <code>scanf</code> function allocates a buffer and
stores its address in the word that the argument points to.  You should
free the buffer with <code>free</code> when you no longer need it.

<p>Here is an example of using the <code>a</code> flag with the <code>%[<small>...</small>]</code>
conversion specification to read a "variable assignment" of the form
<code><var>variable</var> = <var>value</var></code>.

<br><pre>{
  char *variable, *value;

  if (2 &gt; scanf ("%a[a-zA-Z0-9] = %a[^\n]\n",
                 &amp;variable, &amp;value))
    {
      invalid_input_error ();
      return 0;
    }

  <small>...</small>
}
</pre>

</body></html>

