<html lang="en">
<head>
<title>The GNU C Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name=description content="The GNU C Library">
<meta name=generator content="makeinfo 4.2">
<link href="http://www.gnu.org/software/texinfo/" rel=generator-home>
</head>
<body>
<p>
Node:<a name="Host%20Identification">Host Identification</a>,
Next:<a rel=next accesskey=n href="Platform-Type.html#Platform%20Type">Platform Type</a>,
Up:<a rel=up accesskey=u href="System-Management.html#System%20Management">System Management</a>
<hr><br>

<h3>Host Identification</h3>

<p>This section explains how to identify the particular system on which your
program is running.  First, let's review the various ways computer systems
are named, which is a little complicated because of the history of the
development of the Internet.

<p>Every Unix system (also known as a host) has a host name, whether it's
connected to a network or not.  In its simplest form, as used before
computer networks were an issue, it's just a word like <code>chicken</code>.

<p>But any system attached to the Internet or any network like it conforms
to a more rigorous naming convention as part of the Domain Name System
(DNS).  In DNS, every host name is composed of two parts:

<ol type=1 start=1>
</p><li>hostname
<li>domain name
</ol>

<p>You will note that "hostname" looks a lot like "host name", but is
not the same thing, and that people often incorrectly refer to entire
host names as "domain names."

<p>In DNS, the full host name is properly called the FQDN (Fully Qualified
Domain Name) and consists of the hostname, then a period, then the
domain name.  The domain name itself usually has multiple components
separated by periods.  So for example, a system's hostname may be
<code>chicken</code> and its domain name might be <code>ai.mit.edu</code>, so
its FQDN (which is its host name) is <code>chicken.ai.mit.edu</code>.

<p>Adding to the confusion, though, is that DNS is not the only name space
in which a computer needs to be known.  Another name space is the
NIS (aka YP) name space.  For NIS purposes, there is another domain
name, which is called the NIS domain name or the YP domain name.  It
need not have anything to do with the DNS domain name.

<p>Confusing things even more is the fact that in DNS, it is possible for
multiple FQDNs to refer to the same system.  However, there is always
exactly one of them that is the true host name, and it is called the
canonical FQDN.

<p>In some contexts, the host name is called a "node name."

<p>For more information on DNS host naming, See <a href="Host-Names.html#Host%20Names">Host Names</a>.

<p>Prototypes for these functions appear in <code>unistd.h</code>.

<p>The programs <code>hostname</code>, <code>hostid</code>, and <code>domainname</code> work
by calling these functions.

<p>
<table width="100%">
<tr>
<td align="left">int <b>gethostname</b><i> (char *<var>name</var>, size_t <var>size</var>)
</i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
This function returns the host name of the system on which it is called,
in the array <var>name</var>.  The <var>size</var> argument specifies the size of
this array, in bytes.  Note that this is <em>not</em> the DNS hostname. 
If the system participates in DNS, this is the FQDN (see above).

<p>The return value is <code>0</code> on success and <code>-1</code> on failure.  In
the GNU C library, <code>gethostname</code> fails if <var>size</var> is not large
enough; then you can try again with a larger array.  The following
<code>errno</code> error condition is defined for this function:

<dl>
<dt><code>ENAMETOOLONG</code>
<dd>The <var>size</var> argument is less than the size of the host name plus one. 
</dl>

<p>On some systems, there is a symbol for the maximum possible host name
length: <code>MAXHOSTNAMELEN</code>.  It is defined in <code>sys/param.h</code>. 
But you can't count on this to exist, so it is cleaner to handle
failure and try again.

<p><code>gethostname</code> stores the beginning of the host name in <var>name</var>
even if the host name won't entirely fit.  For some purposes, a
truncated host name is good enough.  If it is, you can ignore the
error code. 
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">int <b>sethostname</b><i> (const char *<var>name</var>, size_t <var>length</var>)
</i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
The <code>sethostname</code> function sets the host name of the system that
calls it to <var>name</var>, a string with length <var>length</var>.  Only
privileged processes are permitted to do this.

<p>Usually <code>sethostname</code> gets called just once, at system boot time. 
Often, the program that calls it sets it to the value it finds in the
file <code>/etc/hostname</code>.

<p>Be sure to set the host name to the full host name, not just the DNS
hostname (see above).

<p>The return value is <code>0</code> on success and <code>-1</code> on failure. 
The following <code>errno</code> error condition is defined for this function:

<dl>
<dt><code>EPERM</code>
<dd>This process cannot set the host name because it is not privileged. 
</dl>
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">int <b>getdomainnname</b><i> (char *<var>name</var>, size_t <var>length</var>)
</i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

<p><code>getdomainname</code> returns the NIS (aka YP) domain name of the system
on which it is called.  Note that this is not the more popular DNS
domain name.  Get that with <code>gethostname</code>.

<p>The specifics of this function are analogous to <code>gethostname</code>, above.

</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">int <b>setdomainname</b><i> (const char *<var>name</var>, size_t <var>length</var>)
</i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

<p><code>getdomainname</code> sets the NIS (aka YP) domain name of the system
on which it is called.  Note that this is not the more popular DNS
domain name.  Set that with <code>sethostname</code>.

<p>The specifics of this function are analogous to <code>sethostname</code>, above.

</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">long int <b>gethostid</b><i> (void)
</i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
This function returns the "host ID" of the machine the program is
running on.  By convention, this is usually the primary Internet IP address
of that machine, converted to a <code>long&nbsp;int</code>.  However, on some
systems it is a meaningless but unique number which is hard-coded for
each machine.

<p>This is not widely used.  It arose in BSD 4.2, but was dropped in BSD 4.4. 
It is not required by POSIX.

<p>The proper way to query the IP address is to use <code>gethostbyname</code>
on the results of <code>gethostname</code>.  For more information on IP addresses,
See <a href="Host-Addresses.html#Host%20Addresses">Host Addresses</a>. 
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">int <b>sethostid</b><i> (long int <var>id</var>)
</i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
The <code>sethostid</code> function sets the "host ID" of the host machine
to <var>id</var>.  Only privileged processes are permitted to do this.  Usually
it happens just once, at system boot time.

<p>The proper way to establish the primary IP address of a system
is to configure the IP address resolver to associate that IP address with
the system's host name as returned by <code>gethostname</code>.  For example,
put a record for the system in <code>/etc/hosts</code>.

<p>See <code>gethostid</code> above for more information on host ids.

<p>The return value is <code>0</code> on success and <code>-1</code> on failure. 
The following <code>errno</code> error conditions are defined for this function:

<dl>
<dt><code>EPERM</code>
<dd>This process cannot set the host name because it is not privileged.

<br><dt><code>ENOSYS</code>
<dd>The operating system does not support setting the host ID.  On some
systems, the host ID is a meaningless but unique number hard-coded for
each machine. 
</dl>
</td></tr>
</table>

</body></html>

