<html lang="en">
<head>
<title>The GNU C Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name=description content="The GNU C Library">
<meta name=generator content="makeinfo 4.2">
<link href="http://www.gnu.org/software/texinfo/" rel=generator-home>
</head>
<body>
<p>
Node:<a name="Byte%20Order">Byte Order</a>,
Next:<a rel=next accesskey=n href="Inet-Example.html#Inet%20Example">Inet Example</a>,
Previous:<a rel=previous accesskey=p href="Services-Database.html#Services%20Database">Services Database</a>,
Up:<a rel=up accesskey=u href="Internet-Namespace.html#Internet%20Namespace">Internet Namespace</a>
<hr><br>

<h4>Byte Order Conversion</h4>

<p>Different kinds of computers use different conventions for the
ordering of bytes within a word.  Some computers put the most
significant byte within a word first (this is called "big-endian"
order), and others put it last ("little-endian" order).

<p>So that machines with different byte order conventions can
communicate, the Internet protocols specify a canonical byte order
convention for data transmitted over the network.  This is known
as <dfn>network byte order</dfn>.

<p>When establishing an Internet socket connection, you must make sure that
the data in the <code>sin_port</code> and <code>sin_addr</code> members of the
<code>sockaddr_in</code> structure are represented in network byte order. 
If you are encoding integer data in the messages sent through the
socket, you should convert this to network byte order too.  If you don't
do this, your program may fail when running on or talking to other kinds
of machines.

<p>If you use <code>getservbyname</code> and <code>gethostbyname</code> or
<code>inet_addr</code> to get the port number and host address, the values are
already in network byte order, and you can copy them directly into
the <code>sockaddr_in</code> structure.

<p>Otherwise, you have to convert the values explicitly.  Use <code>htons</code>
and <code>ntohs</code> to convert values for the <code>sin_port</code> member.  Use
<code>htonl</code> and <code>ntohl</code> to convert IPv4 addresses for the
<code>sin_addr</code> member.  (Remember, <code>struct in_addr</code> is equivalent
to <code>uint32_t</code>.)  These functions are declared in
<code>netinet/in.h</code>.

<p>
<table width="100%">
<tr>
<td align="left">uint16_t <b>htons</b><i> (uint16_t <var>hostshort</var>)
</i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
This function converts the <code>uint16_t</code> integer <var>hostshort</var> from
host byte order to network byte order. 
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">uint16_t <b>ntohs</b><i> (uint16_t <var>netshort</var>)
</i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
This function converts the <code>uint16_t</code> integer <var>netshort</var> from
network byte order to host byte order. 
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">uint32_t <b>htonl</b><i> (uint32_t <var>hostlong</var>)
</i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
This function converts the <code>uint32_t</code> integer <var>hostlong</var> from
host byte order to network byte order.

<p>This is used for IPv4 Internet addresses. 
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">uint32_t <b>ntohl</b><i> (uint32_t <var>netlong</var>)
</i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
This function converts the <code>uint32_t</code> integer <var>netlong</var> from
network byte order to host byte order.

<p>This is used for IPv4 Internet addresses. 
</td></tr>
</table>

</body></html>

