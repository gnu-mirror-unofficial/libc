<html lang="en">
<head>
<title>The GNU C Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU C Library">
<meta name="generator" content="makeinfo 4.6">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
--></style>
</head>
<body>
<div class="node">
<p>
Node:&nbsp;<a name="Charset%20conversion%20in%20gettext">Charset conversion in gettext</a>,
Next:&nbsp;<a rel="next" accesskey="n" href="GUI-program-problems.html#GUI%20program%20problems">GUI program problems</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Advanced-gettext-functions.html#Advanced%20gettext%20functions">Advanced gettext functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Message-catalogs-with-gettext.html#Message%20catalogs%20with%20gettext">Message catalogs with gettext</a>
<hr><br>
</div>

<h3 class="subsubsection">How to specify the output character set <code>gettext</code> uses</h5>

<p><code>gettext</code> not only looks up a translation in a message catalog.  It
also converts the translation on the fly to the desired output character
set.  This is useful if the user is working in a different character set
than the translator who created the message catalog, because it avoids
distributing variants of message catalogs which differ only in the
character set.

   <p>The output character set is, by default, the value of <code>nl_langinfo
(CODESET)</code>, which depends on the <code>LC_CTYPE</code> part of the current
locale.  But programs which store strings in a locale independent way
(e.g. UTF-8) can request that <code>gettext</code> and related functions
return the translations in that encoding, by use of the
<code>bind_textdomain_codeset</code> function.

   <p>Note that the <var>msgid</var> argument to <code>gettext</code> is not subject to
character set conversion.  Also, when <code>gettext</code> does not find a
translation for <var>msgid</var>, it returns <var>msgid</var> unchanged -
independently of the current output character set.  It is therefore
recommended that all <var>msgid</var>s be US-ASCII strings.

<p>
<table width="100%">
<tr>
<td align="left">char * <b>bind_textdomain_codeset</b><i> </i>(<i>const char *</i><var>domainname</var><i>, const char *</i><var>codeset</var><i></i>)<i>
     </i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
The <code>bind_textdomain_codeset</code> function can be used to specify the
output character set for message catalogs for domain <var>domainname</var>. 
The <var>codeset</var> argument must be a valid codeset name which can be used
for the <code>iconv_open</code> function, or a null pointer.

     <p>If the <var>codeset</var> parameter is the null pointer,
<code>bind_textdomain_codeset</code> returns the currently selected codeset
for the domain with the name <var>domainname</var>. It returns <code>NULL</code> if
no codeset has yet been selected.

     <p>The <code>bind_textdomain_codeset</code> function can be used several times. 
If used multiple times with the same <var>domainname</var> argument, the
later call overrides the settings made by the earlier one.

     <p>The <code>bind_textdomain_codeset</code> function returns a pointer to a
string containing the name of the selected codeset.  The string is
allocated internally in the function and must not be changed by the
user.  If the system went out of core during the execution of
<code>bind_textdomain_codeset</code>, the return value is <code>NULL</code> and the
global variable <var>errno</var> is set accordingly.  </td></tr>
</table>

   </body></html>

