<html lang="en">
<head>
<title>The GNU C Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name=description content="The GNU C Library">
<meta name=generator content="makeinfo 4.2">
<link href="http://www.gnu.org/software/texinfo/" rel=generator-home>
</head>
<body>
<p>
Node:<a name="Calling%20Variadics">Calling Variadics</a>,
Next:<a rel=next accesskey=n href="Argument-Macros.html#Argument%20Macros">Argument Macros</a>,
Previous:<a rel=previous accesskey=p href="How-Many-Arguments.html#How%20Many%20Arguments">How Many Arguments</a>,
Up:<a rel=up accesskey=u href="How-Variadic.html#How%20Variadic">How Variadic</a>
<hr><br>

<h5>Calling Variadic Functions</h5>

<p>You don't have to do anything special to call a variadic function. 
Just put the arguments (required arguments, followed by optional ones)
inside parentheses, separated by commas, as usual.  But you must declare
the function with a prototype and know how the argument values are converted.

<p>In principle, functions that are <em>defined</em> to be variadic must also
be <em>declared</em> to be variadic using a function prototype whenever
you call them.  (See <a href="Variadic-Prototypes.html#Variadic%20Prototypes">Variadic Prototypes</a>, for how.)  This is because
some C compilers use a different calling convention to pass the same set
of argument values to a function depending on whether that function
takes variable arguments or fixed arguments.

<p>In practice, the GNU C compiler always passes a given set of argument
types in the same way regardless of whether they are optional or
required.  So, as long as the argument types are self-promoting, you can
safely omit declaring them.  Usually it is a good idea to declare the
argument types for variadic functions, and indeed for all functions. 
But there are a few functions which it is extremely convenient not to
have to declare as variadic--for example, <code>open</code> and
<code>printf</code>.

<p>Since the prototype doesn't specify types for optional arguments, in a
call to a variadic function the <dfn>default argument promotions</dfn> are
performed on the optional argument values.  This means the objects of
type <code>char</code> or <code>short&nbsp;int</code> (whether signed or not) are
promoted to either <code>int</code> or <code>unsigned&nbsp;int</code>, as
appropriate; and that objects of type <code>float</code> are promoted to type
<code>double</code>.  So, if the caller passes a <code>char</code> as an optional
argument, it is promoted to an <code>int</code>, and the function can access
it with <code>va_arg (<var>ap</var>, int)</code>.

<p>Conversion of the required arguments is controlled by the function
prototype in the usual way: the argument expression is converted to the
declared argument type as if it were being assigned to a variable of
that type.

</body></html>

