<html lang="en">
<head>
<title>The GNU C Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name=description content="The GNU C Library">
<meta name=generator content="makeinfo 4.2">
<link href="http://www.gnu.org/software/texinfo/" rel=generator-home>
</head>
<body>
<p>
Node:<a name="Advanced%20Signal%20Handling">Advanced Signal Handling</a>,
Next:<a rel=next accesskey=n href="Signal-and-Sigaction.html#Signal%20and%20Sigaction">Signal and Sigaction</a>,
Previous:<a rel=previous accesskey=p href="Basic-Signal-Handling.html#Basic%20Signal%20Handling">Basic Signal Handling</a>,
Up:<a rel=up accesskey=u href="Signal-Actions.html#Signal%20Actions">Signal Actions</a>
<hr><br>

<h4>Advanced Signal Handling</h4>

<p>The <code>sigaction</code> function has the same basic effect as
<code>signal</code>: to specify how a signal should be handled by the process. 
However, <code>sigaction</code> offers more control, at the expense of more
complexity.  In particular, <code>sigaction</code> allows you to specify
additional flags to control when the signal is generated and how the
handler is invoked.

<p>The <code>sigaction</code> function is declared in <code>signal.h</code>.

<p>
<table width="100%">
<tr>
<td align="left"><b>struct sigaction</b><i>
</i></td>
<td align="right">Data Type</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
Structures of type <code>struct sigaction</code> are used in the
<code>sigaction</code> function to specify all the information about how to
handle a particular signal.  This structure contains at least the
following members:

<dl>
<dt><code>sighandler_t sa_handler</code>
<dd>This is used in the same way as the <var>action</var> argument to the
<code>signal</code> function.  The value can be <code>SIG_DFL</code>,
<code>SIG_IGN</code>, or a function pointer.  See <a href="Basic-Signal-Handling.html#Basic%20Signal%20Handling">Basic Signal Handling</a>.

<br><dt><code>sigset_t sa_mask</code>
<dd>This specifies a set of signals to be blocked while the handler runs. 
Blocking is explained in <a href="Blocking-for-Handler.html#Blocking%20for%20Handler">Blocking for Handler</a>.  Note that the
signal that was delivered is automatically blocked by default before its
handler is started; this is true regardless of the value in
<code>sa_mask</code>.  If you want that signal not to be blocked within its
handler, you must write code in the handler to unblock it.

<br><dt><code>int sa_flags</code>
<dd>This specifies various flags which can affect the behavior of
the signal.  These are described in more detail in <a href="Flags-for-Sigaction.html#Flags%20for%20Sigaction">Flags for Sigaction</a>. 
</dl>
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">int <b>sigaction</b><i> (int <var>signum</var>, const struct sigaction *restrict <var>action</var>, struct sigaction *restrict <var>old-action</var>)
</i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
The <var>action</var> argument is used to set up a new action for the signal
<var>signum</var>, while the <var>old-action</var> argument is used to return
information about the action previously associated with this symbol. 
(In other words, <var>old-action</var> has the same purpose as the
<code>signal</code> function's return value--you can check to see what the
old action in effect for the signal was, and restore it later if you
want.)

<p>Either <var>action</var> or <var>old-action</var> can be a null pointer.  If
<var>old-action</var> is a null pointer, this simply suppresses the return
of information about the old action.  If <var>action</var> is a null pointer,
the action associated with the signal <var>signum</var> is unchanged; this
allows you to inquire about how a signal is being handled without changing
that handling.

<p>The return value from <code>sigaction</code> is zero if it succeeds, and
<code>-1</code> on failure.  The following <code>errno</code> error conditions are
defined for this function:

<dl>
<dt><code>EINVAL</code>
<dd>The <var>signum</var> argument is not valid, or you are trying to
trap or ignore <code>SIGKILL</code> or <code>SIGSTOP</code>. 
</dl>
</td></tr>
</table>

</body></html>

