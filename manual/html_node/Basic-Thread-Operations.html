<html lang="en">
<head>
<title>The GNU C Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU C Library">
<meta name="generator" content="makeinfo 4.6">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
--></style>
</head>
<body>
<div class="node">
<p>
Node:&nbsp;<a name="Basic%20Thread%20Operations">Basic Thread Operations</a>,
Next:&nbsp;<a rel="next" accesskey="n" href="Thread-Attributes.html#Thread%20Attributes">Thread Attributes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="POSIX-Threads.html#POSIX%20Threads">POSIX Threads</a>
<hr><br>
</div>

<h3 class="section">Basic Thread Operations</h3>

<p>These functions are the thread equivalents of <code>fork</code>, <code>exit</code>,
and <code>wait</code>.

<p>
<table width="100%">
<tr>
<td align="left">int <b>pthread_create</b><i> </i>(<i>pthread_t * </i><var>thread</var><i>, pthread_attr_t * </i><var>attr</var><i>, void * </i>(<i>*</i><var>start_routine</var><i></i>)<i></i>(<i>void *</i>)<i>, void * </i><var>arg</var><i></i>)<i>
     </i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
<code>pthread_create</code> creates a new thread of control that executes
concurrently with the calling thread. The new thread calls the
function <var>start_routine</var>, passing it <var>arg</var> as first argument. The
new thread terminates either explicitly, by calling <code>pthread_exit</code>,
or implicitly, by returning from the <var>start_routine</var> function. The
latter case is equivalent to calling <code>pthread_exit</code> with the result
returned by <var>start_routine</var> as exit code.

     <p>The <var>attr</var> argument specifies thread attributes to be applied to the
new thread. See <a href="Thread-Attributes.html#Thread%20Attributes">Thread Attributes</a>, for details. The <var>attr</var>
argument can also be <code>NULL</code>, in which case default attributes are
used: the created thread is joinable (not detached) and has an ordinary
(not realtime) scheduling policy.

     <p>On success, the identifier of the newly created thread is stored in the
location pointed by the <var>thread</var> argument, and a 0 is returned. On
error, a non-zero error code is returned.

     <p>This function may return the following errors:
          <dl>
<dt><code>EAGAIN</code>
          <dd>Not enough system resources to create a process for the new thread,
or more than <code>PTHREAD_THREADS_MAX</code> threads are already active. 
</dl>
     </td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">void <b>pthread_exit</b><i> </i>(<i>void *</i><var>retval</var><i></i>)<i>
     </i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
<code>pthread_exit</code> terminates the execution of the calling thread.  All
cleanup handlers (see <a href="Cleanup-Handlers.html#Cleanup%20Handlers">Cleanup Handlers</a>) that have been set for the
calling thread with <code>pthread_cleanup_push</code> are executed in reverse
order (the most recently pushed handler is executed first). Finalization
functions for thread-specific data are then called for all keys that
have non-<code>NULL</code> values associated with them in the calling thread
(see <a href="Thread-Specific-Data.html#Thread-Specific%20Data">Thread-Specific Data</a>).  Finally, execution of the calling
thread is stopped.

     <p>The <var>retval</var> argument is the return value of the thread. It can be
retrieved from another thread using <code>pthread_join</code>.

     <p>The <code>pthread_exit</code> function never returns. 
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">int <b>pthread_cancel</b><i> </i>(<i>pthread_t </i><var>thread</var><i></i>)<i>
     </i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>

     <p><code>pthread_cancel</code> sends a cancellation request to the thread denoted
by the <var>thread</var> argument.  If there is no such thread,
<code>pthread_cancel</code> fails and returns <code>ESRCH</code>.  Otherwise it
returns 0. See <a href="Cancellation.html#Cancellation">Cancellation</a>, for details. 
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">int <b>pthread_join</b><i> </i>(<i>pthread_t </i><var>th</var><i>, void **thread_</i><var>return</var><i></i>)<i>
     </i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
<code>pthread_join</code> suspends the execution of the calling thread until
the thread identified by <var>th</var> terminates, either by calling
<code>pthread_exit</code> or by being canceled.

     <p>If <var>thread_return</var> is not <code>NULL</code>, the return value of <var>th</var>
is stored in the location pointed to by <var>thread_return</var>.  The return
value of <var>th</var> is either the argument it gave to <code>pthread_exit</code>,
or <code>PTHREAD_CANCELED</code> if <var>th</var> was canceled.

     <p>The joined thread <code>th</code> must be in the joinable state: it must not
have been detached using <code>pthread_detach</code> or the
<code>PTHREAD_CREATE_DETACHED</code> attribute to <code>pthread_create</code>.

     <p>When a joinable thread terminates, its memory resources (thread
descriptor and stack) are not deallocated until another thread performs
<code>pthread_join</code> on it. Therefore, <code>pthread_join</code> must be called
once for each joinable thread created to avoid memory leaks.

     <p>At most one thread can wait for the termination of a given
thread. Calling <code>pthread_join</code> on a thread <var>th</var> on which
another thread is already waiting for termination returns an error.

     <p><code>pthread_join</code> is a cancellation point. If a thread is canceled
while suspended in <code>pthread_join</code>, the thread execution resumes
immediately and the cancellation is executed without waiting for the
<var>th</var> thread to terminate. If cancellation occurs during
<code>pthread_join</code>, the <var>th</var> thread remains not joined.

     <p>On success, the return value of <var>th</var> is stored in the location
pointed to by <var>thread_return</var>, and 0 is returned. On error, one of
the following values is returned:
          <dl>
<dt><code>ESRCH</code>
          <dd>No thread could be found corresponding to that specified by <var>th</var>. 
<br><dt><code>EINVAL</code>
          <dd>The <var>th</var> thread has been detached, or another thread is already
waiting on termination of <var>th</var>. 
<br><dt><code>EDEADLK</code>
          <dd>The <var>th</var> argument refers to the calling thread. 
</dl>
     </td></tr>
</table>

   </body></html>

