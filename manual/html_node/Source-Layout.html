<html lang="en">
<head>
<title>The GNU C Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU C Library">
<meta name="generator" content="makeinfo 4.6">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
--></style>
</head>
<body>
<div class="node">
<p>
Node:&nbsp;<a name="Source%20Layout">Source Layout</a>,
Next:&nbsp;<a rel="next" accesskey="n" href="Porting.html#Porting">Porting</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Maintenance.html#Maintenance">Maintenance</a>
<hr><br>
</div>

<h3 class="appendixsec">Adding New Functions</h3>

<p>The process of building the library is driven by the makefiles, which
make heavy use of special features of GNU <code>make</code>.  The makefiles
are very complex, and you probably don't want to try to understand them. 
But what they do is fairly straightforward, and only requires that you
define a few variables in the right places.

   <p>The library sources are divided into subdirectories, grouped by topic.

   <p>The <code>string</code> subdirectory has all the string-manipulation
functions, <code>math</code> has all the mathematical functions, etc.

   <p>Each subdirectory contains a simple makefile, called <code>Makefile</code>,
which defines a few <code>make</code> variables and then includes the global
makefile <code>Rules</code> with a line like:

<pre class="smallexample">     include ../Rules
     </pre>

<p>The basic variables that a subdirectory makefile defines are:

     <dl>
<dt><code>subdir</code>
     <dd>The name of the subdirectory, for example <code>stdio</code>. 
This variable <strong>must</strong> be defined.

     <br><dt><code>headers</code>
     <dd>The names of the header files in this section of the library,
such as <code>stdio.h</code>.

     <br><dt><code>routines</code>
     <dd><dt><code>aux</code>
     <dd>The names of the modules (source files) in this section of the library. 
These should be simple names, such as <code>strlen</code> (rather than
complete file names, such as <code>strlen.c</code>).  Use <code>routines</code> for
modules that define functions in the library, and <code>aux</code> for
auxiliary modules containing things like data definitions.  But the
values of <code>routines</code> and <code>aux</code> are just concatenated, so there
really is no practical difference.

     <br><dt><code>tests</code>
     <dd>The names of test programs for this section of the library.  These
should be simple names, such as <code>tester</code> (rather than complete file
names, such as <code>tester.c</code>).  <code>make&nbsp;tests</code> will build and
run all the test programs.  If a test program needs input, put the test
data in a file called <code></code><var>test-program</var><code>.input</code>; it will be given to
the test program on its standard input.  If a test program wants to be
run with arguments, put the arguments (all on a single line) in a file
called <code></code><var>test-program</var><code>.args</code>.  Test programs should exit with
zero status when the test passes, and nonzero status when the test
indicates a bug in the library or error in building.

     <br><dt><code>others</code>
     <dd>The names of "other" programs associated with this section of the
library.  These are programs which are not tests per se, but are other
small programs included with the library.  They are built by
<code>make&nbsp;others</code>.

     <br><dt><code>install-lib</code>
     <dd><dt><code>install-data</code>
     <dd><dt><code>install</code>
     <dd>Files to be installed by <code>make&nbsp;install</code>.  Files listed in
<code>install-lib</code> are installed in the directory specified by
<code>libdir</code> in <code>configparms</code> or <code>Makeconfig</code>
(see <a href="Installation.html#Installation">Installation</a>).  Files listed in <code>install-data</code> are
installed in the directory specified by <code>datadir</code> in
<code>configparms</code> or <code>Makeconfig</code>.  Files listed in <code>install</code>
are installed in the directory specified by <code>bindir</code> in
<code>configparms</code> or <code>Makeconfig</code>.

     <br><dt><code>distribute</code>
     <dd>Other files from this subdirectory which should be put into a
distribution tar file.  You need not list here the makefile itself or
the source and header files listed in the other standard variables. 
Only define <code>distribute</code> if there are files used in an unusual way
that should go into the distribution.

     <br><dt><code>generated</code>
     <dd>Files which are generated by <code>Makefile</code> in this subdirectory. 
These files will be removed by <code>make&nbsp;clean</code>, and they will
never go into a distribution.

     <br><dt><code>extra-objs</code>
     <dd>Extra object files which are built by <code>Makefile</code> in this
subdirectory.  This should be a list of file names like <code>foo.o</code>;
the files will actually be found in whatever directory object files are
being built in.  These files will be removed by <code>make&nbsp;clean</code>. 
This variable is used for secondary object files needed to build
<code>others</code> or <code>tests</code>. 
</dl>

   </body></html>

