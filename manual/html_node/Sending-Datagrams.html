<html lang="en">
<head>
<title>The GNU C Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name=description content="The GNU C Library">
<meta name=generator content="makeinfo 4.2">
<link href="http://www.gnu.org/software/texinfo/" rel=generator-home>
</head>
<body>
<p>
Node:<a name="Sending%20Datagrams">Sending Datagrams</a>,
Next:<a rel=next accesskey=n href="Receiving-Datagrams.html#Receiving%20Datagrams">Receiving Datagrams</a>,
Up:<a rel=up accesskey=u href="Datagrams.html#Datagrams">Datagrams</a>
<hr><br>

<h4>Sending Datagrams</h4>

<p>The normal way of sending data on a datagram socket is by using the
<code>sendto</code> function, declared in <code>sys/socket.h</code>.

<p>You can call <code>connect</code> on a datagram socket, but this only
specifies a default destination for further data transmission on the
socket.  When a socket has a default destination you can use
<code>send</code> (see <a href="Sending-Data.html#Sending%20Data">Sending Data</a>) or even <code>write</code> (see <a href="I-O-Primitives.html#I%2fO%20Primitives">I/O Primitives</a>) to send a packet there.  You can cancel the default
destination by calling <code>connect</code> using an address format of
<code>AF_UNSPEC</code> in the <var>addr</var> argument.  See <a href="Connecting.html#Connecting">Connecting</a>, for
more information about the <code>connect</code> function.

<p>
<table width="100%">
<tr>
<td align="left">int <b>sendto</b><i> (int <var>socket</var>, void *<var>buffer</var>. size_t <var>size</var>, int <var>flags</var>, struct sockaddr *<var>addr</var>, socklen_t <var>length</var>)
</i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
The <code>sendto</code> function transmits the data in the <var>buffer</var>
through the socket <var>socket</var> to the destination address specified
by the <var>addr</var> and <var>length</var> arguments.  The <var>size</var> argument
specifies the number of bytes to be transmitted.

<p>The <var>flags</var> are interpreted the same way as for <code>send</code>; see
<a href="Socket-Data-Options.html#Socket%20Data%20Options">Socket Data Options</a>.

<p>The return value and error conditions are also the same as for
<code>send</code>, but you cannot rely on the system to detect errors and
report them; the most common error is that the packet is lost or there
is no-one at the specified address to receive it, and the operating
system on your machine usually does not know this.

<p>It is also possible for one call to <code>sendto</code> to report an error
owing to a problem related to a previous call.

<p>This function is defined as a cancellation point in multi-threaded
programs, so one has to be prepared for this and make sure that
allocated resources (like memory, files descriptors, semaphores or
whatever) are freed even if the thread is canceled. 
</td></tr>
</table>

</body></html>

