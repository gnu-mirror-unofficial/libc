<html lang="en">
<head>
<title>The GNU C Library</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name=description content="The GNU C Library">
<meta name=generator content="makeinfo 4.2">
<link href="http://www.gnu.org/software/texinfo/" rel=generator-home>
</head>
<body>
<p>
Node:<a name="Environment%20Access">Environment Access</a>,
Next:<a rel=next accesskey=n href="Standard-Environment.html#Standard%20Environment">Standard Environment</a>,
Up:<a rel=up accesskey=u href="Environment-Variables.html#Environment%20Variables">Environment Variables</a>
<hr><br>

<h4>Environment Access</h4>

<p>The value of an environment variable can be accessed with the
<code>getenv</code> function.  This is declared in the header file
<code>stdlib.h</code>.  All of the following functions can be safely used in
multi-threaded programs.  It is made sure that concurrent modifications
to the environment do not lead to errors.

<p>
<table width="100%">
<tr>
<td align="left">char * <b>getenv</b><i> (const char *<var>name</var>)
</i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
This function returns a string that is the value of the environment
variable <var>name</var>.  You must not modify this string.  In some non-Unix
systems not using the GNU library, it might be overwritten by subsequent
calls to <code>getenv</code> (but not by any other library function).  If the
environment variable <var>name</var> is not defined, the value is a null
pointer. 
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">int <b>putenv</b><i> (char *<var>string</var>)
</i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
The <code>putenv</code> function adds or removes definitions from the environment. 
If the <var>string</var> is of the form <code><var>name</var>=<var>value</var></code>, the
definition is added to the environment.  Otherwise, the <var>string</var> is
interpreted as the name of an environment variable, and any definition
for this variable in the environment is removed.

<p>The difference to the <code>setenv</code> function is that the exact string
given as the parameter <var>string</var> is put into the environment.  If the
user should change the string after the <code>putenv</code> call this will
reflect in automatically in the environment.  This also requires that
<var>string</var> is no automatic variable which scope is left before the
variable is removed from the environment.  The same applies of course to
dynamically allocated variables which are freed later.

<p>This function is part of the extended Unix interface.  Since it was also
available in old SVID libraries you should define either
<var>_XOPEN_SOURCE</var> or <var>_SVID_SOURCE</var> before including any header. 
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">int <b>setenv</b><i> (const char *<var>name</var>, const char *<var>value</var>, int <var>replace</var>)
</i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
The <code>setenv</code> function can be used to add a new definition to the
environment.  The entry with the name <var>name</var> is replaced by the
value <code><var>name</var>=<var>value</var></code>.  Please note that this is also true
if <var>value</var> is the empty string.  To do this a new string is created
and the strings <var>name</var> and <var>value</var> are copied.  A null pointer
for the <var>value</var> parameter is illegal.  If the environment already
contains an entry with key <var>name</var> the <var>replace</var> parameter
controls the action.  If replace is zero, nothing happens.  Otherwise
the old entry is replaced by the new one.

<p>Please note that you cannot remove an entry completely using this function.

<p>This function was originally part of the BSD library but is now part of
the Unix standard. 
</td></tr>
</table>

<p>
<table width="100%">
<tr>
<td align="left">int <b>unsetenv</b><i> (const char *<var>name</var>)
</i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
Using this function one can remove an entry completely from the
environment.  If the environment contains an entry with the key
<var>name</var> this whole entry is removed.  A call to this function is
equivalent to a call to <code>putenv</code> when the <var>value</var> part of the
string is empty.

<p>The function return <code>-1</code> if <var>name</var> is a null pointer, points to
an empty string, or points to a string containing a <code>=</code> character. 
It returns <code>0</code> if the call succeeded.

<p>This function was originally part of the BSD library but is now part of
the Unix standard.  The BSD version had no return value, though. 
</td></tr>
</table>

<p>There is one more function to modify the whole environment.  This
function is said to be used in the POSIX.9 (POSIX bindings for Fortran
77) and so one should expect it did made it into POSIX.1.  But this
never happened.  But we still provide this function as a GNU extension
to enable writing standard compliant Fortran environments.

<p>
<table width="100%">
<tr>
<td align="left">int <b>clearenv</b><i> (void)
</i></td>
<td align="right">Function</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
The <code>clearenv</code> function removes all entries from the environment. 
Using <code>putenv</code> and <code>setenv</code> new entries can be added again
later.

<p>If the function is successful it returns <code>0</code>.  Otherwise the return
value is nonzero. 
</td></tr>
</table>

<p>You can deal directly with the underlying representation of environment
objects to add more variables to the environment (for example, to
communicate with another program you are about to execute;
see <a href="Executing-a-File.html#Executing%20a%20File">Executing a File</a>).

<p>
<table width="100%">
<tr>
<td align="left">char ** <b>environ</b><i>
</i></td>
<td align="right">Variable</td>
</tr>
</table>
<table width="95%" align="center">
<tr><td>
The environment is represented as an array of strings.  Each string is
of the format <code><var>name</var>=<var>value</var></code>.  The order in which
strings appear in the environment is not significant, but the same
<var>name</var> must not appear more than once.  The last element of the
array is a null pointer.

<p>This variable is declared in the header file <code>unistd.h</code>.

<p>If you just want to get the value of an environment variable, use
<code>getenv</code>. 
</td></tr>
</table>

<p>Unix systems, and the GNU system, pass the initial value of
<code>environ</code> as the third argument to <code>main</code>. 
See <a href="Program-Arguments.html#Program%20Arguments">Program Arguments</a>.

</body></html>

